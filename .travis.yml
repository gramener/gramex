# Config file for automatic testing at travis-ci.org

# Run in Python 3 only. Drop Python 2 testing
language: python
python: '3.7'

# Python 3.7 works only in Xenial with sudo
# https://github.com/travis-ci/travis-ci/issues/9069#issuecomment-425720905
dist: xenial
sudo: yes

services:
  - mysql
  - postgresql

addons:
  apt:
    packages:
      - pandoc

# Cache modules for faster builds
cache:
  timeout: 1000
  pip: true
  npm: true
  yarn: true
  # Don't cache miniconda directory. It's slower. Fresh install takes ~200s.
  # But caching takes ~150s (extraction) + ~190s (re-packing) = ~340s (slower).
  # directories:
  #   - $HOME/miniconda

script:
  - env
